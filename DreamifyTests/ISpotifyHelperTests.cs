using Dreamify.Handlers;
using Dreamify.Services;
using Moq;
using Moq.Protected;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;

namespace DreamifyTests
{
    [TestClass]
    public class ISpotifyHelperTests
    {
        [TestMethod]
        public async Task SpotifySongSearch_ReturnsCorrectSongName()
        {
            // Arrange
            var mockHandler = new Mock<HttpMessageHandler>();
            mockHandler
                .Protected()
                .Setup<Task<HttpResponseMessage>>(
                    "SendAsync",
                    ItExpr.IsAny<HttpRequestMessage>(),
                    ItExpr.IsAny<CancellationToken>()
                )
                .ReturnsAsync(new HttpResponseMessage()
                {
                    StatusCode = HttpStatusCode.OK,
                    Content = new StringContent("{\r\n  \"tracks\": {\r\n    \"href\": \"https://api.spotify.com/v1/search?query=rockstar&type=track&market=SE&locale=sv-SE%2Csv%3Bq%3D0.9%2Cen-US%3Bq%3D0.8%2Cen%3Bq%3D0.7&offset=0&limit=10\",\r\n    \"items\": [\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/246dkjvS1zLTtiykXe5h60\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/246dkjvS1zLTtiykXe5h60\",\r\n              \"id\": \"246dkjvS1zLTtiykXe5h60\",\r\n              \"name\": \"Post Malone\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:246dkjvS1zLTtiykXe5h60\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/6trNtQUgC8cgbWcqoMYkOR\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/6trNtQUgC8cgbWcqoMYkOR\",\r\n          \"id\": \"6trNtQUgC8cgbWcqoMYkOR\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b273b1c4b76e23414c9f20242268\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e02b1c4b76e23414c9f20242268\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00004851b1c4b76e23414c9f20242268\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"beerbongs & bentleys\",\r\n          \"release_date\": \"2018-04-27\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 18,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:6trNtQUgC8cgbWcqoMYkOR\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/246dkjvS1zLTtiykXe5h60\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/246dkjvS1zLTtiykXe5h60\",\r\n            \"id\": \"246dkjvS1zLTtiykXe5h60\",\r\n            \"name\": \"Post Malone\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:246dkjvS1zLTtiykXe5h60\"\r\n          },\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/1URnnhqYAYcrqrcwql10ft\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/1URnnhqYAYcrqrcwql10ft\",\r\n            \"id\": \"1URnnhqYAYcrqrcwql10ft\",\r\n            \"name\": \"21 Savage\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:1URnnhqYAYcrqrcwql10ft\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 218146,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"USUM71710087\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/0e7ipj03S05BNilyu5bRzt\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/0e7ipj03S05BNilyu5bRzt\",\r\n        \"id\": \"0e7ipj03S05BNilyu5bRzt\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"rockstar (feat. 21 Savage)\",\r\n        \"popularity\": 86,\r\n        \"preview_url\": null,\r\n        \"track_number\": 6,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:0e7ipj03S05BNilyu5bRzt\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/4r63FhuTkUYltbVAg5TQnk\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/4r63FhuTkUYltbVAg5TQnk\",\r\n              \"id\": \"4r63FhuTkUYltbVAg5TQnk\",\r\n              \"name\": \"DaBaby\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:4r63FhuTkUYltbVAg5TQnk\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/623PL2MBg50Br5dLXC9E9e\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/623PL2MBg50Br5dLXC9E9e\",\r\n          \"id\": \"623PL2MBg50Br5dLXC9E9e\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b27320e08c8cc23f404d723b5647\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e0220e08c8cc23f404d723b5647\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000485120e08c8cc23f404d723b5647\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"BLAME IT ON BABY\",\r\n          \"release_date\": \"2020-04-17\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 13,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:623PL2MBg50Br5dLXC9E9e\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/4r63FhuTkUYltbVAg5TQnk\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/4r63FhuTkUYltbVAg5TQnk\",\r\n            \"id\": \"4r63FhuTkUYltbVAg5TQnk\",\r\n            \"name\": \"DaBaby\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:4r63FhuTkUYltbVAg5TQnk\"\r\n          },\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/757aE44tKEUQEqRuT6GnEB\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/757aE44tKEUQEqRuT6GnEB\",\r\n            \"id\": \"757aE44tKEUQEqRuT6GnEB\",\r\n            \"name\": \"Roddy Ricch\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:757aE44tKEUQEqRuT6GnEB\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 181733,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"USUM72007941\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/7ytR5pFWmSjzHJIeQkgog4\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/7ytR5pFWmSjzHJIeQkgog4\",\r\n        \"id\": \"7ytR5pFWmSjzHJIeQkgog4\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"ROCKSTAR (feat. Roddy Ricch)\",\r\n        \"popularity\": 79,\r\n        \"preview_url\": null,\r\n        \"track_number\": 7,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:7ytR5pFWmSjzHJIeQkgog4\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/6deZN1bslXzeGvOLaLMOIF\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/6deZN1bslXzeGvOLaLMOIF\",\r\n              \"id\": \"6deZN1bslXzeGvOLaLMOIF\",\r\n              \"name\": \"Nickelback\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:6deZN1bslXzeGvOLaLMOIF\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/74qGFpCx9XpFaZUnqqdDtb\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/74qGFpCx9XpFaZUnqqdDtb\",\r\n          \"id\": \"74qGFpCx9XpFaZUnqqdDtb\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b2738ad2adfa59683b9c8ace96c1\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e028ad2adfa59683b9c8ace96c1\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d000048518ad2adfa59683b9c8ace96c1\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"All the Right Reasons (Walmart Exclusive Edition)\",\r\n          \"release_date\": \"2005-09-26\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 15,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:74qGFpCx9XpFaZUnqqdDtb\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/6deZN1bslXzeGvOLaLMOIF\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/6deZN1bslXzeGvOLaLMOIF\",\r\n            \"id\": \"6deZN1bslXzeGvOLaLMOIF\",\r\n            \"name\": \"Nickelback\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:6deZN1bslXzeGvOLaLMOIF\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 252040,\r\n        \"explicit\": false,\r\n        \"external_ids\": {\r\n          \"isrc\": \"NLA320581343\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/3RlsVPIIs5KFhLFhxZ4iDF\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/3RlsVPIIs5KFhLFhxZ4iDF\",\r\n        \"id\": \"3RlsVPIIs5KFhLFhxZ4iDF\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar\",\r\n        \"popularity\": 69,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/2391f026967b74197a7c92e770fcf080abc81c62?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 11,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:3RlsVPIIs5KFhLFhxZ4iDF\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"single\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/5deLgmgAEgy8UHOfJ9Dj8w\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/5deLgmgAEgy8UHOfJ9Dj8w\",\r\n              \"id\": \"5deLgmgAEgy8UHOfJ9Dj8w\",\r\n              \"name\": \"Ilkay Sencan\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:5deLgmgAEgy8UHOfJ9Dj8w\"\r\n            },\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/3v6Ji4uoWtKRkhuDUaxi9n\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/3v6Ji4uoWtKRkhuDUaxi9n\",\r\n              \"id\": \"3v6Ji4uoWtKRkhuDUaxi9n\",\r\n              \"name\": \"Dynoro\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:3v6Ji4uoWtKRkhuDUaxi9n\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/1US66auJ538TiXGeUf24yL\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/1US66auJ538TiXGeUf24yL\",\r\n          \"id\": \"1US66auJ538TiXGeUf24yL\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b273a1d56525c3380e5cbda5f48f\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e02a1d56525c3380e5cbda5f48f\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00004851a1d56525c3380e5cbda5f48f\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Rockstar\",\r\n          \"release_date\": \"2019-06-21\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 1,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:1US66auJ538TiXGeUf24yL\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/5deLgmgAEgy8UHOfJ9Dj8w\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/5deLgmgAEgy8UHOfJ9Dj8w\",\r\n            \"id\": \"5deLgmgAEgy8UHOfJ9Dj8w\",\r\n            \"name\": \"Ilkay Sencan\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:5deLgmgAEgy8UHOfJ9Dj8w\"\r\n          },\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/3v6Ji4uoWtKRkhuDUaxi9n\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/3v6Ji4uoWtKRkhuDUaxi9n\",\r\n            \"id\": \"3v6Ji4uoWtKRkhuDUaxi9n\",\r\n            \"name\": \"Dynoro\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:3v6Ji4uoWtKRkhuDUaxi9n\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 212280,\r\n        \"explicit\": false,\r\n        \"external_ids\": {\r\n          \"isrc\": \"DEE861901930\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/4OgwXdylh75fHfwUzJTUqg\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/4OgwXdylh75fHfwUzJTUqg\",\r\n        \"id\": \"4OgwXdylh75fHfwUzJTUqg\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar\",\r\n        \"popularity\": 71,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/35a2899bc8474cb0b7b57d450c367f89f923513d?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 1,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:4OgwXdylh75fHfwUzJTUqg\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/0kKygNaCQjqVLrImIftRDJ\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/0kKygNaCQjqVLrImIftRDJ\",\r\n              \"id\": \"0kKygNaCQjqVLrImIftRDJ\",\r\n              \"name\": \"Einár\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:0kKygNaCQjqVLrImIftRDJ\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/6WZR2h3rFvJH8DKq3oHt6T\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/6WZR2h3rFvJH8DKq3oHt6T\",\r\n          \"id\": \"6WZR2h3rFvJH8DKq3oHt6T\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b2733ed7b4fcc007eb2ec762ed77\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e023ed7b4fcc007eb2ec762ed77\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d000048513ed7b4fcc007eb2ec762ed77\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Unge Med Extra Energi\",\r\n          \"release_date\": \"2020-09-28\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 9,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:6WZR2h3rFvJH8DKq3oHt6T\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/0kKygNaCQjqVLrImIftRDJ\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/0kKygNaCQjqVLrImIftRDJ\",\r\n            \"id\": \"0kKygNaCQjqVLrImIftRDJ\",\r\n            \"name\": \"Einár\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:0kKygNaCQjqVLrImIftRDJ\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 151497,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"SE6QE2066662\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/3SgxrIzomzoZtRLeI46ts1\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/3SgxrIzomzoZtRLeI46ts1\",\r\n        \"id\": \"3SgxrIzomzoZtRLeI46ts1\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar\",\r\n        \"popularity\": 58,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/90080f77786082d744c1b1d7f0920ca165beae77?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 3,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:3SgxrIzomzoZtRLeI46ts1\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"single\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/087ZBrJyDhTGPwPsOFXXqj\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/087ZBrJyDhTGPwPsOFXXqj\",\r\n              \"id\": \"087ZBrJyDhTGPwPsOFXXqj\",\r\n              \"name\": \"ONY9RMX\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:087ZBrJyDhTGPwPsOFXXqj\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/1rrp5CJbGCJOJI3UZzShL6\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/1rrp5CJbGCJOJI3UZzShL6\",\r\n          \"id\": \"1rrp5CJbGCJOJI3UZzShL6\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b27383a73dd330e5fa37843497b7\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e0283a73dd330e5fa37843497b7\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000485183a73dd330e5fa37843497b7\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Rockstar (Remix)\",\r\n          \"release_date\": \"2022-04-12\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 1,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:1rrp5CJbGCJOJI3UZzShL6\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/087ZBrJyDhTGPwPsOFXXqj\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/087ZBrJyDhTGPwPsOFXXqj\",\r\n            \"id\": \"087ZBrJyDhTGPwPsOFXXqj\",\r\n            \"name\": \"ONY9RMX\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:087ZBrJyDhTGPwPsOFXXqj\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 222056,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"AUXN22240786\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/5l38Fl6isxOyDXWVlwPJjJ\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/5l38Fl6isxOyDXWVlwPJjJ\",\r\n        \"id\": \"5l38Fl6isxOyDXWVlwPJjJ\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar (Remix)\",\r\n        \"popularity\": 42,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/12eb6ee709f848151dc2d48e30d992582a9cefa2?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 1,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:5l38Fl6isxOyDXWVlwPJjJ\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/32vWCbZh0xZ4o9gkz4PsEU\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/32vWCbZh0xZ4o9gkz4PsEU\",\r\n              \"id\": \"32vWCbZh0xZ4o9gkz4PsEU\",\r\n              \"name\": \"Dolly Parton\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:32vWCbZh0xZ4o9gkz4PsEU\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/337iOvlhWakFamgb6x2vKN\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/337iOvlhWakFamgb6x2vKN\",\r\n          \"id\": \"337iOvlhWakFamgb6x2vKN\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b273b72610342a4fddb5e431fe88\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e02b72610342a4fddb5e431fe88\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00004851b72610342a4fddb5e431fe88\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Rockstar (Deluxe)\",\r\n          \"release_date\": \"2024-01-19\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 39,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:337iOvlhWakFamgb6x2vKN\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/32vWCbZh0xZ4o9gkz4PsEU\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/32vWCbZh0xZ4o9gkz4PsEU\",\r\n            \"id\": \"32vWCbZh0xZ4o9gkz4PsEU\",\r\n            \"name\": \"Dolly Parton\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:32vWCbZh0xZ4o9gkz4PsEU\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 276547,\r\n        \"explicit\": false,\r\n        \"external_ids\": {\r\n          \"isrc\": \"QZRD92303068\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/42Dy9aV8b5ykre2SNCVbSA\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/42Dy9aV8b5ykre2SNCVbSA\",\r\n        \"id\": \"42Dy9aV8b5ykre2SNCVbSA\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar\",\r\n        \"popularity\": 47,\r\n        \"preview_url\": null,\r\n        \"track_number\": 1,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:42Dy9aV8b5ykre2SNCVbSA\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"single\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/4DSFmAOMwMqDVKIsPY0kqs\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/4DSFmAOMwMqDVKIsPY0kqs\",\r\n              \"id\": \"4DSFmAOMwMqDVKIsPY0kqs\",\r\n              \"name\": \"Sweezy\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:4DSFmAOMwMqDVKIsPY0kqs\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/38J4t1kP9ZkW07Uaa975Tx\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/38J4t1kP9ZkW07Uaa975Tx\",\r\n          \"id\": \"38J4t1kP9ZkW07Uaa975Tx\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b2733ff86f33d9abc847bb6690df\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e023ff86f33d9abc847bb6690df\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d000048513ff86f33d9abc847bb6690df\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Rockstar (Freestyle)\",\r\n          \"release_date\": \"2023-11-21\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 2,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:38J4t1kP9ZkW07Uaa975Tx\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/4DSFmAOMwMqDVKIsPY0kqs\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/4DSFmAOMwMqDVKIsPY0kqs\",\r\n            \"id\": \"4DSFmAOMwMqDVKIsPY0kqs\",\r\n            \"name\": \"Sweezy\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:4DSFmAOMwMqDVKIsPY0kqs\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 159426,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"QZWFF2319536\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/7GMV1W9jQN90oH6wmohhee\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/7GMV1W9jQN90oH6wmohhee\",\r\n        \"id\": \"7GMV1W9jQN90oH6wmohhee\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar (Freestyle)\",\r\n        \"popularity\": 55,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/fe9b39747479580514cd931fba3a6af6418add62?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 1,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:7GMV1W9jQN90oH6wmohhee\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/4MCBfE4596Uoi2O4DtmEMz\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/4MCBfE4596Uoi2O4DtmEMz\",\r\n              \"id\": \"4MCBfE4596Uoi2O4DtmEMz\",\r\n              \"name\": \"Juice WRLD\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:4MCBfE4596Uoi2O4DtmEMz\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/1typPCwqyXMfFpvDZAyKew\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/1typPCwqyXMfFpvDZAyKew\",\r\n          \"id\": \"1typPCwqyXMfFpvDZAyKew\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b2737459992b444de38842b9bee7\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e027459992b444de38842b9bee7\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d000048517459992b444de38842b9bee7\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Fighting Demons (Deluxe)\",\r\n          \"release_date\": \"2022-03-18\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 23,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:1typPCwqyXMfFpvDZAyKew\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/4MCBfE4596Uoi2O4DtmEMz\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/4MCBfE4596Uoi2O4DtmEMz\",\r\n            \"id\": \"4MCBfE4596Uoi2O4DtmEMz\",\r\n            \"name\": \"Juice WRLD\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:4MCBfE4596Uoi2O4DtmEMz\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 180750,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"USUG12105426\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/2aaUTdC6YQqEZiQEk8wPxK\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/2aaUTdC6YQqEZiQEk8wPxK\",\r\n        \"id\": \"2aaUTdC6YQqEZiQEk8wPxK\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar In His Prime\",\r\n        \"popularity\": 65,\r\n        \"preview_url\": null,\r\n        \"track_number\": 8,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:2aaUTdC6YQqEZiQEk8wPxK\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/5BjqnnMoENTODrnMpjL9nC\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/5BjqnnMoENTODrnMpjL9nC\",\r\n              \"id\": \"5BjqnnMoENTODrnMpjL9nC\",\r\n              \"name\": \"gielinha33\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:5BjqnnMoENTODrnMpjL9nC\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/5wdOZCOPNj8g4qeCuzbH8o\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/5wdOZCOPNj8g4qeCuzbH8o\",\r\n          \"id\": \"5wdOZCOPNj8g4qeCuzbH8o\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b27321cb2be4a4e2cd4c110beae9\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e0221cb2be4a4e2cd4c110beae9\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000485121cb2be4a4e2cd4c110beae9\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"33, ninguém entende\",\r\n          \"release_date\": \"2023-11-02\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 30,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:5wdOZCOPNj8g4qeCuzbH8o\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/5BjqnnMoENTODrnMpjL9nC\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/5BjqnnMoENTODrnMpjL9nC\",\r\n            \"id\": \"5BjqnnMoENTODrnMpjL9nC\",\r\n            \"name\": \"gielinha33\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:5BjqnnMoENTODrnMpjL9nC\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 151185,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"QZZ8A2366429\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/1VP6tdeyNGHliHApMAOjHH\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/1VP6tdeyNGHliHApMAOjHH\",\r\n        \"id\": \"1VP6tdeyNGHliHApMAOjHH\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar\",\r\n        \"popularity\": 33,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/dd77a193e87b33fe563e23e38c574aa9a1781919?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 9,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:1VP6tdeyNGHliHApMAOjHH\"\r\n      }\r\n    ],\r\n    \"limit\": 10,\r\n    \"next\": \"https://api.spotify.com/v1/search?query=rockstar&type=track&market=SE&locale=sv-SE%2Csv%3Bq%3D0.9%2Cen-US%3Bq%3D0.8%2Cen%3Bq%3D0.7&offset=10&limit=10\",\r\n    \"offset\": 0,\r\n    \"previous\": null,\r\n    \"total\": 869\r\n  }\r\n}")
                });

            // Creating mock httpClient 
            HttpClient mockClient = new HttpClient(mockHandler.Object);

            // Creating SpotifyHelper using the mock client
            SpotifyHelper spotifyHelper = new SpotifyHelper("0","0", mockClient);


            // Act
            var result = await spotifyHelper.SpotifySongSearch("rockstar", 10, "SE");

            // Assert
            Assert.AreEqual("rockstar (feat. 21 Savage)", result.First().SongName);
        }

        [TestMethod]
        public async Task SpotifySongSearch_ReturnsCorrectArtist()
        {
            // Arrange
            var mockHandler = new Mock<HttpMessageHandler>();
            mockHandler
                .Protected()
                .Setup<Task<HttpResponseMessage>>(
                    "SendAsync",
                    ItExpr.IsAny<HttpRequestMessage>(),
                    ItExpr.IsAny<CancellationToken>()
                )
                .ReturnsAsync(new HttpResponseMessage()
                {
                    StatusCode = HttpStatusCode.OK,
                    Content = new StringContent("{\r\n  \"tracks\": {\r\n    \"href\": \"https://api.spotify.com/v1/search?query=rockstar&type=track&market=SE&locale=sv-SE%2Csv%3Bq%3D0.9%2Cen-US%3Bq%3D0.8%2Cen%3Bq%3D0.7&offset=0&limit=10\",\r\n    \"items\": [\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/246dkjvS1zLTtiykXe5h60\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/246dkjvS1zLTtiykXe5h60\",\r\n              \"id\": \"246dkjvS1zLTtiykXe5h60\",\r\n              \"name\": \"Post Malone\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:246dkjvS1zLTtiykXe5h60\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/6trNtQUgC8cgbWcqoMYkOR\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/6trNtQUgC8cgbWcqoMYkOR\",\r\n          \"id\": \"6trNtQUgC8cgbWcqoMYkOR\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b273b1c4b76e23414c9f20242268\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e02b1c4b76e23414c9f20242268\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00004851b1c4b76e23414c9f20242268\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"beerbongs & bentleys\",\r\n          \"release_date\": \"2018-04-27\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 18,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:6trNtQUgC8cgbWcqoMYkOR\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/246dkjvS1zLTtiykXe5h60\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/246dkjvS1zLTtiykXe5h60\",\r\n            \"id\": \"246dkjvS1zLTtiykXe5h60\",\r\n            \"name\": \"Post Malone\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:246dkjvS1zLTtiykXe5h60\"\r\n          },\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/1URnnhqYAYcrqrcwql10ft\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/1URnnhqYAYcrqrcwql10ft\",\r\n            \"id\": \"1URnnhqYAYcrqrcwql10ft\",\r\n            \"name\": \"21 Savage\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:1URnnhqYAYcrqrcwql10ft\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 218146,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"USUM71710087\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/0e7ipj03S05BNilyu5bRzt\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/0e7ipj03S05BNilyu5bRzt\",\r\n        \"id\": \"0e7ipj03S05BNilyu5bRzt\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"rockstar (feat. 21 Savage)\",\r\n        \"popularity\": 86,\r\n        \"preview_url\": null,\r\n        \"track_number\": 6,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:0e7ipj03S05BNilyu5bRzt\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/4r63FhuTkUYltbVAg5TQnk\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/4r63FhuTkUYltbVAg5TQnk\",\r\n              \"id\": \"4r63FhuTkUYltbVAg5TQnk\",\r\n              \"name\": \"DaBaby\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:4r63FhuTkUYltbVAg5TQnk\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/623PL2MBg50Br5dLXC9E9e\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/623PL2MBg50Br5dLXC9E9e\",\r\n          \"id\": \"623PL2MBg50Br5dLXC9E9e\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b27320e08c8cc23f404d723b5647\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e0220e08c8cc23f404d723b5647\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000485120e08c8cc23f404d723b5647\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"BLAME IT ON BABY\",\r\n          \"release_date\": \"2020-04-17\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 13,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:623PL2MBg50Br5dLXC9E9e\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/4r63FhuTkUYltbVAg5TQnk\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/4r63FhuTkUYltbVAg5TQnk\",\r\n            \"id\": \"4r63FhuTkUYltbVAg5TQnk\",\r\n            \"name\": \"DaBaby\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:4r63FhuTkUYltbVAg5TQnk\"\r\n          },\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/757aE44tKEUQEqRuT6GnEB\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/757aE44tKEUQEqRuT6GnEB\",\r\n            \"id\": \"757aE44tKEUQEqRuT6GnEB\",\r\n            \"name\": \"Roddy Ricch\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:757aE44tKEUQEqRuT6GnEB\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 181733,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"USUM72007941\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/7ytR5pFWmSjzHJIeQkgog4\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/7ytR5pFWmSjzHJIeQkgog4\",\r\n        \"id\": \"7ytR5pFWmSjzHJIeQkgog4\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"ROCKSTAR (feat. Roddy Ricch)\",\r\n        \"popularity\": 79,\r\n        \"preview_url\": null,\r\n        \"track_number\": 7,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:7ytR5pFWmSjzHJIeQkgog4\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/6deZN1bslXzeGvOLaLMOIF\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/6deZN1bslXzeGvOLaLMOIF\",\r\n              \"id\": \"6deZN1bslXzeGvOLaLMOIF\",\r\n              \"name\": \"Nickelback\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:6deZN1bslXzeGvOLaLMOIF\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/74qGFpCx9XpFaZUnqqdDtb\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/74qGFpCx9XpFaZUnqqdDtb\",\r\n          \"id\": \"74qGFpCx9XpFaZUnqqdDtb\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b2738ad2adfa59683b9c8ace96c1\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e028ad2adfa59683b9c8ace96c1\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d000048518ad2adfa59683b9c8ace96c1\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"All the Right Reasons (Walmart Exclusive Edition)\",\r\n          \"release_date\": \"2005-09-26\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 15,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:74qGFpCx9XpFaZUnqqdDtb\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/6deZN1bslXzeGvOLaLMOIF\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/6deZN1bslXzeGvOLaLMOIF\",\r\n            \"id\": \"6deZN1bslXzeGvOLaLMOIF\",\r\n            \"name\": \"Nickelback\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:6deZN1bslXzeGvOLaLMOIF\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 252040,\r\n        \"explicit\": false,\r\n        \"external_ids\": {\r\n          \"isrc\": \"NLA320581343\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/3RlsVPIIs5KFhLFhxZ4iDF\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/3RlsVPIIs5KFhLFhxZ4iDF\",\r\n        \"id\": \"3RlsVPIIs5KFhLFhxZ4iDF\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar\",\r\n        \"popularity\": 69,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/2391f026967b74197a7c92e770fcf080abc81c62?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 11,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:3RlsVPIIs5KFhLFhxZ4iDF\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"single\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/5deLgmgAEgy8UHOfJ9Dj8w\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/5deLgmgAEgy8UHOfJ9Dj8w\",\r\n              \"id\": \"5deLgmgAEgy8UHOfJ9Dj8w\",\r\n              \"name\": \"Ilkay Sencan\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:5deLgmgAEgy8UHOfJ9Dj8w\"\r\n            },\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/3v6Ji4uoWtKRkhuDUaxi9n\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/3v6Ji4uoWtKRkhuDUaxi9n\",\r\n              \"id\": \"3v6Ji4uoWtKRkhuDUaxi9n\",\r\n              \"name\": \"Dynoro\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:3v6Ji4uoWtKRkhuDUaxi9n\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/1US66auJ538TiXGeUf24yL\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/1US66auJ538TiXGeUf24yL\",\r\n          \"id\": \"1US66auJ538TiXGeUf24yL\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b273a1d56525c3380e5cbda5f48f\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e02a1d56525c3380e5cbda5f48f\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00004851a1d56525c3380e5cbda5f48f\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Rockstar\",\r\n          \"release_date\": \"2019-06-21\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 1,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:1US66auJ538TiXGeUf24yL\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/5deLgmgAEgy8UHOfJ9Dj8w\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/5deLgmgAEgy8UHOfJ9Dj8w\",\r\n            \"id\": \"5deLgmgAEgy8UHOfJ9Dj8w\",\r\n            \"name\": \"Ilkay Sencan\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:5deLgmgAEgy8UHOfJ9Dj8w\"\r\n          },\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/3v6Ji4uoWtKRkhuDUaxi9n\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/3v6Ji4uoWtKRkhuDUaxi9n\",\r\n            \"id\": \"3v6Ji4uoWtKRkhuDUaxi9n\",\r\n            \"name\": \"Dynoro\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:3v6Ji4uoWtKRkhuDUaxi9n\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 212280,\r\n        \"explicit\": false,\r\n        \"external_ids\": {\r\n          \"isrc\": \"DEE861901930\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/4OgwXdylh75fHfwUzJTUqg\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/4OgwXdylh75fHfwUzJTUqg\",\r\n        \"id\": \"4OgwXdylh75fHfwUzJTUqg\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar\",\r\n        \"popularity\": 71,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/35a2899bc8474cb0b7b57d450c367f89f923513d?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 1,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:4OgwXdylh75fHfwUzJTUqg\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/0kKygNaCQjqVLrImIftRDJ\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/0kKygNaCQjqVLrImIftRDJ\",\r\n              \"id\": \"0kKygNaCQjqVLrImIftRDJ\",\r\n              \"name\": \"Einár\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:0kKygNaCQjqVLrImIftRDJ\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/6WZR2h3rFvJH8DKq3oHt6T\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/6WZR2h3rFvJH8DKq3oHt6T\",\r\n          \"id\": \"6WZR2h3rFvJH8DKq3oHt6T\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b2733ed7b4fcc007eb2ec762ed77\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e023ed7b4fcc007eb2ec762ed77\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d000048513ed7b4fcc007eb2ec762ed77\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Unge Med Extra Energi\",\r\n          \"release_date\": \"2020-09-28\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 9,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:6WZR2h3rFvJH8DKq3oHt6T\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/0kKygNaCQjqVLrImIftRDJ\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/0kKygNaCQjqVLrImIftRDJ\",\r\n            \"id\": \"0kKygNaCQjqVLrImIftRDJ\",\r\n            \"name\": \"Einár\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:0kKygNaCQjqVLrImIftRDJ\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 151497,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"SE6QE2066662\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/3SgxrIzomzoZtRLeI46ts1\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/3SgxrIzomzoZtRLeI46ts1\",\r\n        \"id\": \"3SgxrIzomzoZtRLeI46ts1\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar\",\r\n        \"popularity\": 58,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/90080f77786082d744c1b1d7f0920ca165beae77?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 3,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:3SgxrIzomzoZtRLeI46ts1\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"single\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/087ZBrJyDhTGPwPsOFXXqj\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/087ZBrJyDhTGPwPsOFXXqj\",\r\n              \"id\": \"087ZBrJyDhTGPwPsOFXXqj\",\r\n              \"name\": \"ONY9RMX\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:087ZBrJyDhTGPwPsOFXXqj\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/1rrp5CJbGCJOJI3UZzShL6\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/1rrp5CJbGCJOJI3UZzShL6\",\r\n          \"id\": \"1rrp5CJbGCJOJI3UZzShL6\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b27383a73dd330e5fa37843497b7\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e0283a73dd330e5fa37843497b7\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000485183a73dd330e5fa37843497b7\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Rockstar (Remix)\",\r\n          \"release_date\": \"2022-04-12\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 1,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:1rrp5CJbGCJOJI3UZzShL6\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/087ZBrJyDhTGPwPsOFXXqj\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/087ZBrJyDhTGPwPsOFXXqj\",\r\n            \"id\": \"087ZBrJyDhTGPwPsOFXXqj\",\r\n            \"name\": \"ONY9RMX\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:087ZBrJyDhTGPwPsOFXXqj\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 222056,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"AUXN22240786\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/5l38Fl6isxOyDXWVlwPJjJ\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/5l38Fl6isxOyDXWVlwPJjJ\",\r\n        \"id\": \"5l38Fl6isxOyDXWVlwPJjJ\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar (Remix)\",\r\n        \"popularity\": 42,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/12eb6ee709f848151dc2d48e30d992582a9cefa2?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 1,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:5l38Fl6isxOyDXWVlwPJjJ\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/32vWCbZh0xZ4o9gkz4PsEU\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/32vWCbZh0xZ4o9gkz4PsEU\",\r\n              \"id\": \"32vWCbZh0xZ4o9gkz4PsEU\",\r\n              \"name\": \"Dolly Parton\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:32vWCbZh0xZ4o9gkz4PsEU\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/337iOvlhWakFamgb6x2vKN\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/337iOvlhWakFamgb6x2vKN\",\r\n          \"id\": \"337iOvlhWakFamgb6x2vKN\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b273b72610342a4fddb5e431fe88\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e02b72610342a4fddb5e431fe88\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00004851b72610342a4fddb5e431fe88\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Rockstar (Deluxe)\",\r\n          \"release_date\": \"2024-01-19\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 39,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:337iOvlhWakFamgb6x2vKN\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/32vWCbZh0xZ4o9gkz4PsEU\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/32vWCbZh0xZ4o9gkz4PsEU\",\r\n            \"id\": \"32vWCbZh0xZ4o9gkz4PsEU\",\r\n            \"name\": \"Dolly Parton\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:32vWCbZh0xZ4o9gkz4PsEU\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 276547,\r\n        \"explicit\": false,\r\n        \"external_ids\": {\r\n          \"isrc\": \"QZRD92303068\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/42Dy9aV8b5ykre2SNCVbSA\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/42Dy9aV8b5ykre2SNCVbSA\",\r\n        \"id\": \"42Dy9aV8b5ykre2SNCVbSA\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar\",\r\n        \"popularity\": 47,\r\n        \"preview_url\": null,\r\n        \"track_number\": 1,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:42Dy9aV8b5ykre2SNCVbSA\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"single\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/4DSFmAOMwMqDVKIsPY0kqs\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/4DSFmAOMwMqDVKIsPY0kqs\",\r\n              \"id\": \"4DSFmAOMwMqDVKIsPY0kqs\",\r\n              \"name\": \"Sweezy\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:4DSFmAOMwMqDVKIsPY0kqs\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/38J4t1kP9ZkW07Uaa975Tx\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/38J4t1kP9ZkW07Uaa975Tx\",\r\n          \"id\": \"38J4t1kP9ZkW07Uaa975Tx\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b2733ff86f33d9abc847bb6690df\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e023ff86f33d9abc847bb6690df\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d000048513ff86f33d9abc847bb6690df\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Rockstar (Freestyle)\",\r\n          \"release_date\": \"2023-11-21\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 2,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:38J4t1kP9ZkW07Uaa975Tx\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/4DSFmAOMwMqDVKIsPY0kqs\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/4DSFmAOMwMqDVKIsPY0kqs\",\r\n            \"id\": \"4DSFmAOMwMqDVKIsPY0kqs\",\r\n            \"name\": \"Sweezy\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:4DSFmAOMwMqDVKIsPY0kqs\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 159426,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"QZWFF2319536\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/7GMV1W9jQN90oH6wmohhee\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/7GMV1W9jQN90oH6wmohhee\",\r\n        \"id\": \"7GMV1W9jQN90oH6wmohhee\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar (Freestyle)\",\r\n        \"popularity\": 55,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/fe9b39747479580514cd931fba3a6af6418add62?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 1,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:7GMV1W9jQN90oH6wmohhee\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/4MCBfE4596Uoi2O4DtmEMz\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/4MCBfE4596Uoi2O4DtmEMz\",\r\n              \"id\": \"4MCBfE4596Uoi2O4DtmEMz\",\r\n              \"name\": \"Juice WRLD\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:4MCBfE4596Uoi2O4DtmEMz\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/1typPCwqyXMfFpvDZAyKew\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/1typPCwqyXMfFpvDZAyKew\",\r\n          \"id\": \"1typPCwqyXMfFpvDZAyKew\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b2737459992b444de38842b9bee7\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e027459992b444de38842b9bee7\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d000048517459992b444de38842b9bee7\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"Fighting Demons (Deluxe)\",\r\n          \"release_date\": \"2022-03-18\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 23,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:1typPCwqyXMfFpvDZAyKew\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/4MCBfE4596Uoi2O4DtmEMz\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/4MCBfE4596Uoi2O4DtmEMz\",\r\n            \"id\": \"4MCBfE4596Uoi2O4DtmEMz\",\r\n            \"name\": \"Juice WRLD\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:4MCBfE4596Uoi2O4DtmEMz\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 180750,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"USUG12105426\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/2aaUTdC6YQqEZiQEk8wPxK\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/2aaUTdC6YQqEZiQEk8wPxK\",\r\n        \"id\": \"2aaUTdC6YQqEZiQEk8wPxK\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar In His Prime\",\r\n        \"popularity\": 65,\r\n        \"preview_url\": null,\r\n        \"track_number\": 8,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:2aaUTdC6YQqEZiQEk8wPxK\"\r\n      },\r\n      {\r\n        \"album\": {\r\n          \"album_type\": \"album\",\r\n          \"artists\": [\r\n            {\r\n              \"external_urls\": {\r\n                \"spotify\": \"https://open.spotify.com/artist/5BjqnnMoENTODrnMpjL9nC\"\r\n              },\r\n              \"href\": \"https://api.spotify.com/v1/artists/5BjqnnMoENTODrnMpjL9nC\",\r\n              \"id\": \"5BjqnnMoENTODrnMpjL9nC\",\r\n              \"name\": \"gielinha33\",\r\n              \"type\": \"artist\",\r\n              \"uri\": \"spotify:artist:5BjqnnMoENTODrnMpjL9nC\"\r\n            }\r\n          ],\r\n          \"external_urls\": {\r\n            \"spotify\": \"https://open.spotify.com/album/5wdOZCOPNj8g4qeCuzbH8o\"\r\n          },\r\n          \"href\": \"https://api.spotify.com/v1/albums/5wdOZCOPNj8g4qeCuzbH8o\",\r\n          \"id\": \"5wdOZCOPNj8g4qeCuzbH8o\",\r\n          \"images\": [\r\n            {\r\n              \"height\": 640,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000b27321cb2be4a4e2cd4c110beae9\",\r\n              \"width\": 640\r\n            },\r\n            {\r\n              \"height\": 300,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d00001e0221cb2be4a4e2cd4c110beae9\",\r\n              \"width\": 300\r\n            },\r\n            {\r\n              \"height\": 64,\r\n              \"url\": \"https://i.scdn.co/image/ab67616d0000485121cb2be4a4e2cd4c110beae9\",\r\n              \"width\": 64\r\n            }\r\n          ],\r\n          \"is_playable\": true,\r\n          \"name\": \"33, ninguém entende\",\r\n          \"release_date\": \"2023-11-02\",\r\n          \"release_date_precision\": \"day\",\r\n          \"total_tracks\": 30,\r\n          \"type\": \"album\",\r\n          \"uri\": \"spotify:album:5wdOZCOPNj8g4qeCuzbH8o\"\r\n        },\r\n        \"artists\": [\r\n          {\r\n            \"external_urls\": {\r\n              \"spotify\": \"https://open.spotify.com/artist/5BjqnnMoENTODrnMpjL9nC\"\r\n            },\r\n            \"href\": \"https://api.spotify.com/v1/artists/5BjqnnMoENTODrnMpjL9nC\",\r\n            \"id\": \"5BjqnnMoENTODrnMpjL9nC\",\r\n            \"name\": \"gielinha33\",\r\n            \"type\": \"artist\",\r\n            \"uri\": \"spotify:artist:5BjqnnMoENTODrnMpjL9nC\"\r\n          }\r\n        ],\r\n        \"disc_number\": 1,\r\n        \"duration_ms\": 151185,\r\n        \"explicit\": true,\r\n        \"external_ids\": {\r\n          \"isrc\": \"QZZ8A2366429\"\r\n        },\r\n        \"external_urls\": {\r\n          \"spotify\": \"https://open.spotify.com/track/1VP6tdeyNGHliHApMAOjHH\"\r\n        },\r\n        \"href\": \"https://api.spotify.com/v1/tracks/1VP6tdeyNGHliHApMAOjHH\",\r\n        \"id\": \"1VP6tdeyNGHliHApMAOjHH\",\r\n        \"is_local\": false,\r\n        \"is_playable\": true,\r\n        \"name\": \"Rockstar\",\r\n        \"popularity\": 33,\r\n        \"preview_url\": \"https://p.scdn.co/mp3-preview/dd77a193e87b33fe563e23e38c574aa9a1781919?cid=86c5d5ea06b14d18852939869704bbc5\",\r\n        \"track_number\": 9,\r\n        \"type\": \"track\",\r\n        \"uri\": \"spotify:track:1VP6tdeyNGHliHApMAOjHH\"\r\n      }\r\n    ],\r\n    \"limit\": 10,\r\n    \"next\": \"https://api.spotify.com/v1/search?query=rockstar&type=track&market=SE&locale=sv-SE%2Csv%3Bq%3D0.9%2Cen-US%3Bq%3D0.8%2Cen%3Bq%3D0.7&offset=10&limit=10\",\r\n    \"offset\": 0,\r\n    \"previous\": null,\r\n    \"total\": 869\r\n  }\r\n}")
                });

            // Creating mock httpClient 
            HttpClient mockClient = new HttpClient(mockHandler.Object);

            // Creating SpotifyHelper using the mock client
            SpotifyHelper spotifyHelper = new SpotifyHelper("0", "0", mockClient);


            // Act
            var result = await spotifyHelper.SpotifySongSearch("rockstar", 0, "SE");

            // Assert
            Assert.AreEqual("Post Malone", result.First().Artists.First().ArtistName);
        }

        [TestMethod]
        [ExpectedException(typeof(HttpRequestException))]
        public async Task SpotifySongSearch_ExceptionOnBadStatusCode()
        {
            // Arrange
            var mockHandler = new Mock<HttpMessageHandler>();
            mockHandler
                .Protected()
                .Setup<Task<HttpResponseMessage>>(
                    "SendAsync",
                    ItExpr.IsAny<HttpRequestMessage>(),
                    ItExpr.IsAny<CancellationToken>()
                )
                .ReturnsAsync(new HttpResponseMessage()
                {
                    StatusCode = HttpStatusCode.InternalServerError,
                });

            // Creating mock httpClient 
            HttpClient mockClient = new HttpClient(mockHandler.Object);

            // Creating SpotifyHelper using the mock client
            SpotifyHelper spotifyHelper = new SpotifyHelper("0", "0", mockClient);


            // Act
            var result = await spotifyHelper.SpotifySongSearch("rockstar", 0, "SE");

            // Assert
            Assert.AreEqual("Post Malone", result.First().Artists.First().ArtistName);
        }
    }
}
